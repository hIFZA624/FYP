@model finalYearProject.ViewModel.PUCITShowViewModel
<!DOCTYPE html>
@{

    var uname = ViewBag.uname;
    var cafe = ViewBag.cafe;
}
<html lang="en">
<head>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css" integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js" integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0" crossorigin="anonymous"></script>
    <title>Bootstrap Example</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css" integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <script>
        function Delete(e) {
            console.log("In delete ffunction");
        }
    </script>


    <style type="text/css">
    

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

    </style>
</head>
<body>
    <header>
        <!-- sTART OF hOME PAGE-->
        <!-- sTART OF hOME PAGE-->
        <nav class="navbar navbar-light bg-dark">
            <div class="container-fluid" style="padding:10px;">
                <a class="nav-link disabled" href="#" aria-disabled="true">PUCIT Dept Cafe System</a>
                <form class="d-flex">
                    <ul class=" nav justify-content-end">
                        <li class="nav-item">
                            <a class="nav-link active" aria-current="page" asp-controller="Cafe" asp-action="PucitCafe">Home</a>
                        </li>

                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" data-bs-toggle="dropdown" href="#" role="button" aria-expanded="false">Menu</a>
                            <ul class="dropdown-menu" style="background-color:white; text-emphasis-color:white">
                                @foreach (finalYearProject.Models.PUCITCafeCategory p in Model.Category)
                                {
                                    <li><a asp-action="ProductsView" asp-route-uname="@uname" asp-route-cafe="@cafe" asp-route-CategoryName="@p.CategoryName" class="dropdown-item">@p.CategoryName</a></li>

                                }

                            </ul>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" aria-current="page" href="#">Order List</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" aria-current="page" asp-action="HomePage">Exit</a>
                        </li>
                    </ul>
                </form>
            </div>
        </nav>
    </header>
    
    <!--End of Home PAGE-->
    <!-- Start of Menu Section-->
    <section id="menu" class="menu ">
        <div class="container">
         
           

        </div>

    </section><!--Cart Viiew-->
    <!-- The Modal -->
    
        <!-- Modal content -->
        <div class="modal-content">
            

                        <table id="mytable" class="table">
                            <!--  <thead>
                                <tr>
                                  <th>Product</th>
                                  <th>Name</th>
                                  <th>Qty</th>
                                  <th>Price</th>

                                </tr>
                              </thead>
                            <tbody class="table-body">
                            </tbody>-->

                        </table>

                   
    </div>
    <!--Java Script Code-->
    <script type="text/javascript">

        function finshProduct() {
            console.log("Finshded Prodcut");
            //product convert
            let cartItems = localStorage.getItem("productsInCart");
            cartItems = JSON.parse(cartItems);
            if (cartItems != null) {
                localStorage.clear();

                localStorage.setItem("productsInCartversion2", JSON.stringify(cartItems));
                window.location.reload();
            }
            document.getElementById("demo").innerHTML = "Paragraph change";
        }
        /*const cartBox=document.querySelector(".modal-content");
        const cardboxtable=cartBox.querySelector("table");
        let tableData="";
        tableData+="<tr><th>Item Name      </th><th>item no     </th><th>item price   </th><th>     item Description    </th></tr>";
        if(cartBox &&  JSON.parse(localStorage.getItem("productsInCart"))
        {

        cartBox.innerHTML="";
        Object.values(JSON.parse(localStorage.getItem("productsInCart")).map(item=>{
          cartBox.innerHTML+
        }))
        *?
          /*JSON.parse(localStorage.getItem("productsInCart")).map(data=>{
        tableData+="<tr><th>"+data.Name+"</th><th>"+data.inCart+"</th><th>"+data.Price+"</th><th>"+data.Para+"</th></tr>";
          });*/
        //}
        //cardboxtable.innerHTML=tableData;

        localStorage.setItem("id", 0);
        function displayCart() {
            let cartItems = localStorage.getItem("productsforadmin");
            cartItems = JSON.parse(cartItems);
            let cartBox = document.querySelector(".modal-content");
            let tablecontent = cartBox.querySelector("table");
            let tabledata = "";
            tabledata += `<thead class="make">
                                            <tr>
                                              <th>Product Id</th>
         <th>Product Category</th>
                                              <th>Product Name</th>
                                              <th>Qty</th>
                                              <th>Price</th>
                                               <th>PickUp Time</th>
<th></th>
                                            </tr><thead>`;
            if (cartItems) {
                Object.values(cartItems).map(item => {
                    if (item.cafe == "@cafe" && item.userId == "@uname") {
                    tabledata += `<tbody >


<tr>

                                              <td>
                                                <div class="product-img" >
                                                  <p>${item.Id}</p>
                                                </div>
                                              </td>

                                               <td>
                                                  <p>${item.Para}</p>
                                              </td >

                                              <td>
                                                <p>${item.Name}</p>
                                              </td>

                                              <td>
                                                <div class="button-conatiner">
                                                <p>${item.inCart}</p>
                                                </div>
                                              </td>

                                              <td>
                                                 <p>${item.Price}</p>
                                              </td >
 <td>
                                                 <p>${item.time}</p>
                                              </td  >
                                                <td>
                                                <button class="removeItem btn btn-danger">Recieved</button>
                                              </td  >

                                            </tr>
                                            <tbody>
                                           `;
                        }
                    tablecontent.innerHTML = tabledata;
                })
            }
        }


       
        displayCart();
        const remove = document.getElementsByClassName('removeItem');
        for (var i = 0; i < remove.length; i++) {
            let removebtn = remove[i];
            let items = [];

            removebtn.addEventListener('click', () => {
                console.log("hello");
                let cartItems = localStorage.getItem("productsInCart");
                cartItems = JSON.parse(cartItems);
                const number = event.target.parentElement.parentElement.children[3].children[0].textContent;
                cartItems.map(data => {
                    if (data.Name != event.target.parentElement.parentElement.children[2].children[0].textContent) {
                        items.push(data);
                    }
                })
                let productNumbers = localStorage.getItem("cartNumbers");
                productNumbers = parseInt(productNumbers);
                if (productNumbers);
                {
                    localStorage.setItem("cartNumbers", productNumbers - number);
                    document.querySelector(".increse span").textContent = productNumbers - number;
                }
                localStorage.setItem("productsInCart", JSON.stringify(items));
                window.location.reload();
            })
        }

    </script>
</body>
</html>


