@using finalYearProject.ViewModel
@model PUCITShowViewModel
@{
    var uname = ViewBag.uname;
    Layout = "~/Views/Shared/_LayoutCafe.cshtml";
}
<div class="modal-content">
    <table id="mytable" class="table">
        <!--  <thead>
            <tr>
              <th>Product</th>
              <th>Name</th>
              <th>Qty</th>
              <th>Price</th>
            </tr>
          </thead>
        <tbody class="table-body">
        </tbody>-->

    </table>
</div>
<!--Java Script Code-->
<script type="text/javascript">

    
    /*const cartBox=document.querySelector(".modal-content");
    const cardboxtable=cartBox.querySelector("table");
    let tableData="";
    tableData+="<tr><th>Item Name      </th><th>item no     </th><th>item price   </th><th>     item Description    </th></tr>";
    if(cartBox &&  JSON.parse(localStorage.getItem("productsInCart"))
    {
    cartBox.innerHTML="";
    Object.values(JSON.parse(localStorage.getItem("productsInCart")).map(item=>{
      cartBox.innerHTML+
    }))
    *?
      /*JSON.parse(localStorage.getItem("productsInCart")).map(data=>{
    tableData+="<tr><th>"+data.Name+"</th><th>"+data.inCart+"</th><th>"+data.Price+"</th><th>"+data.Para+"</th></tr>";
      });*/
    //}
    //cardboxtable.innerHTML=tableData;

   
    function displayCart() {
        let cartItems = localStorage.getItem("productsforadmin");
        cartItems = JSON.parse(cartItems);
        let cartBox = document.querySelector(".modal-content");
        let tablecontent = cartBox.querySelector("table");
        let tabledata = "";
        tabledata += `<thead class="make">
                                                <tr>
    <th>User Name</th>
                                                 
             <th>Product Category</th>
                                                  <th>Product Name</th>
                                                  <th>Qty</th>
                                                  <th>Price</th>
                                                   <th>PickUp Time</th>
<th></th>
                                                </tr><thead>`;
        if (cartItems) {
            Object.values(cartItems).map(item => {
                if (item.cafe == "pucitcafe") {
                    tabledata += `<tbody >
<tr>
                                                <td>
                                                   
                                                      <p>${item.email}</p>
                                                   
                                                  </td>
                                                  

                                                   <td>
                                                      <p>${item.Para}</p>
                                                  </td >

                                                  <td>
                                                    <p>${item.Name}</p>
                                                  </td>

                                                  <td>
                                                    <div class="button-conatiner">
                                                    <p>${item.inCart}</p>
                                                    </div>
                                                  </td>

                                                  <td>
 
                                                     <p>${item.Price}</p>
                                                  </td>

                                                    <td>
                                                       <input type="time" value="${item.time}"  type="text" placeholder="Enter PickUpTime" class="form-control"  >
                                                   </td>

                                                    <td>
                                                    <button  class="removeItem btn btn-info">Update</button>
                                                  </td>

                                                </tr>
                                                <tbody>
                                               `;
                }
                tablecontent.innerHTML = tabledata;
            })
        }
    }
    displayCart();
    const remove = document.getElementsByClassName('removeItem');
    for (var i = 0; i < remove.length; i++) {
        let removebtn = remove[i];
        let items = [];
        removebtn.addEventListener('click', () => {
            console.log(event.target.parentElement.parentElement.children[3].children[0].textContent);
           console.log(event.target.parentElement.parentElement.children[6].children[0].value)
            let cartItems = localStorage.getItem("productsforadmin");
            console.log(event.target.parentElement.parentElement.children[0].children[0].textContent);
            cartItems = JSON.parse(cartItems);
            cartItems.map(data => {

                if (data.Name == event.target.parentElement.parentElement.children[2].children[0].textContent && data.email==event.target.parentElement.parentElement.children[0].children[0].textContent) {
                 
                    data.time = event.target.parentElement.parentElement.children[5].children[0].value;
                    items.push(data);
                }
                else
                    items.push(data);
           })
            localStorage.setItem("productsforadmin", JSON.stringify(items));
              while (items.length) {
    items.pop();
  }
        })
    }
</script>
   
